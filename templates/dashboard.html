<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Alliance Marine Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
</head>

<body class="d-flex flex-column min-vh-100">

  <!-- Navbar -->
  {% include 'navbar.html' %}
  <div class="main-wrap d-flex">
    {% include 'sidebar.html' %}

  <div class="container py-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold">Welcome, {{ session['user'] }}</h2>
      <p class="text-muted">Manage all your estimations and reports in one place.</p>
    </div>

    <div class="row g-4 justify-content-center">

      <!-- Estimations Card -->
      <div class="col-md-4 col-sm-6">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body text-center">
            <div class="mb-3 text-primary">
              <i class="bi bi-pencil-square" style="font-size: 2.5rem;"></i>
            </div>
            <h5 class="card-title fw-bold">New Estimation</h5>
            <p class="card-text text-muted mb-3">Create a new container repair estimation.</p>
            <a href="{{ url_for('estimation') }}" class="btn btn-primary w-100">Start Estimation</a>
          </div>
        </div>
      </div>

      <!-- Reports Card -->
      <div class="col-md-4 col-sm-6">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body text-center">
            <div class="mb-3 text-success">
              <i class="bi bi-bar-chart-line" style="font-size: 2.5rem;"></i>
            </div>
            <h5 class="card-title fw-bold">Reports</h5>
            <p class="card-text text-muted mb-3">View, preview, and export generated reports.</p>
            <a href="{{ url_for('reports') }}" class="btn btn-success w-100">View Reports</a>
          </div>
        </div>
      </div>

    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

   <!-- before closing </body> tag -->
  {% include 'footer.html' %}

<script>
document.addEventListener("DOMContentLoaded", () => {
  const navbar = document.querySelector(".navbar");
  const footer = document.querySelector("footer");
  
  if (!navbar || !footer) return; // Safety check
  
  let lastScrollTop = 0;
  let isScrollingDown = false;

  function checkScroll() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    // Navbar hide/show logic
    if (scrollTop > lastScrollTop && scrollTop > 80) {
      if (!isScrollingDown) {
        navbar.style.transform = "translateY(-100%)";
        isScrollingDown = true;
      }
    } else {
      if (isScrollingDown || scrollTop <= 80) {
        navbar.style.transform = "translateY(0)";
        isScrollingDown = false;
      }
    }
    
    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

    // Footer visibility - show only at bottom
    const scrollHeight = document.documentElement.scrollHeight;
    const clientHeight = document.documentElement.clientHeight;
    const scrollPosition = scrollTop + clientHeight;
    
    // Show footer when within 100px of bottom
    if (scrollHeight - scrollPosition < 100) {
      footer.classList.add('visible');
    } else {
      footer.classList.remove('visible');
    }
  }

  // Listen to scroll events
  window.addEventListener("scroll", checkScroll);
  
  // Also check on page load and resize (in case page is short)
  window.addEventListener("resize", checkScroll);
  
  // Initial check on load
  setTimeout(checkScroll, 100);
});
</script>
</body>
</html>
